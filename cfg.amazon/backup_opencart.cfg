#
# The configuration file for myexecutor: it contains the shell CLIs 
#     and the corresponding descriptions
#
SSH_CMD := ssh ec2-user@ec2-52-11-213-175.us-west-2.compute.amazonaws.com -i ~/amazon/access/myec2_t2_keys.pem

BACKUP_DIR := ~/backup/CURRENT_DATE

SCP_SRC := scp -i ~/amazon/access/myec2_t2_keys.pem  ec2-user@ec2-52-11-213-175.us-west-2.compute.amazonaws.com:backup/opencart_backup_CURRENT_DATE.tar.gz


STEP_001.CMD:= SSH_CMD 'mkdir -p  $::TQ_CONFIG{BACKUP_DIR}'
STEP_001.description:= To create the backup dir

#STEP_002.CMD:= SSH_CMD 'mysqldump -u root -p locator > $::TQ_CONFIG{BACKUP_DIR}/locator.sql'
#STEP_002.description:= To backup localguider db - please provide password

#STEP_003.CMD:= SSH_CMD 'mysqldump -u root -p db_login > $::TQ_CONFIG{BACKUP_DIR}/db_login.sql'
#STEP_003.description:= To backup db_login db - please provide password

STEP_005.CMD:= SSH_CMD 'mysqldump -u root -pRj720913 opencart > $::TQ_CONFIG{BACKUP_DIR}/opencart.sql'
STEP_005.description:= To backup opencart - please provide password


STEP_210.CMD:= SSH_CMD 'cp -r /var/www/plateauclub $::TQ_CONFIG{BACKUP_DIR}/'
STEP_210.description:= To backup the www dirs under /var/www/plateauclub


STEP_990.CMD:= SSH_CMD 'cd $::TQ_CONFIG{BACKUP_DIR}/..; tar zcvf opencart_backup_CURRENT_DATE.tar.gz CURRENT_DATE/'
STEP_990.description:= To tar the backup dir and db of opencart 

STEP_991.CMD:= $::TQ_CONFIG{SCP_SRC} ~/amazon/backup/
STEP_991.description:= To copy the backup tarball

